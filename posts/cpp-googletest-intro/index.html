<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>C++ unit tests with googletest | Povilas Blog</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="http://blog.povilasb.com/posts/cpp-googletest-intro/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Povilas Balciunas">
<link rel="prev" href="../sphinx-getting-started/" title="Getting started with Sphinx" type="text/html">
<link rel="next" href="../cpp-static-analysis/" title="Static C++ code analysis" type="text/html">
<meta property="og:site_name" content="Povilas Blog">
<meta property="og:title" content="C++ unit tests with googletest">
<meta property="og:url" content="http://blog.povilasb.com/posts/cpp-googletest-intro/">
<meta property="og:description" content="Unit tests with googletest
Unit tests let programmer know that his software works as expected. If you i
have ever done heavy development or you are planning to do so, you would
definitely see the obvi">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-03-02T20:43:00+02:00">
<meta property="article:tag" content="cpp">
<meta property="article:tag" content="testing">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark
bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="../../">

            <span id="blog-title">Povilas Blog</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right">
<li class="nav-item">
    <a href="index.rst" id="sourcelink" class="nav-link">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">C++ unit tests with googletest</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Povilas Balciunas
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2014-03-02T20:43:00+02:00" itemprop="datePublished" title="2014-03-02 20:43">2014-03-02 20:43</time></a>
            </p>
                <p class="commentline">    

                    </p>
<p class="sourceline"><a href="index.rst" class="sourcelink">Source</a></p>

        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <section id="unit-tests-with-googletest"><h2>Unit tests with googletest</h2>
<p>Unit tests let programmer know that his software works as expected. If you i
have ever done heavy development or you are planning to do so, you would
definitely see the obvious advantages of unit testing your software:</p>
<ul class="simple">
<li><p>you can easily check if software works on different platforms;</p></li>
<li><p>unit tests might replace or at least supplement the samples;</p></li>
<li><p>you can assert if your code still works after refactoring;</p></li>
<li><p>unit tests can also be used to test and track performance;</p></li>
<li><p>tests can be run automatically and periodically;</p></li>
<li><p>unit tests make you try module/library API before integrating it to the other
code - this way design issues can be noticed sooner;</p></li>
<li><p>unit tests inspire confidence;</p></li>
<li><p>and many more advantages...</p></li>
</ul>
<p>One of the many testing frameworks for C++ if googletest. Let's see how to
write unit tests for your modules.</p>
<section id="setup-environment"><h3>Setup environment</h3>
<p>We'll use googletest, CMake and debian 7.3 system. Get the prerequisites:</p>
<div class="code"><pre class="code bash"><a id="rest_code_c61a75f7f90146bca70b390fe0d3459b-1" name="rest_code_c61a75f7f90146bca70b390fe0d3459b-1" href="#rest_code_c61a75f7f90146bca70b390fe0d3459b-1"></a>$ sudo apt-get install cmake unzip
</pre></div>
<p>Download the latest googletest version from
<a class="reference external" href="https://code.google.com/p/googletest/downloads/list">here</a> (by the time I
wrote this article it was v1.7.0).</p>
<p>Unpack the package:</p>
<div class="code"><pre class="code bash"><a id="rest_code_4995445cd60c49f799a00a55fe28f66d-1" name="rest_code_4995445cd60c49f799a00a55fe28f66d-1" href="#rest_code_4995445cd60c49f799a00a55fe28f66d-1"></a>$ unzip gtest-1.7.0.zip
</pre></div>
</section><section id="create-sample-project"><h3>Create sample project</h3>
<p>You can get a sample from github:</p>
<div class="code"><pre class="code bash"><a id="rest_code_d12d2ade6913407cab7367f06817f6d5-1" name="rest_code_d12d2ade6913407cab7367f06817f6d5-1" href="#rest_code_d12d2ade6913407cab7367f06817f6d5-1"></a>$ git clone https://github.com/povilasb-com/cpp-googletest-intro.git
</pre></div>
<p>Sample project directory tree:</p>
<pre class="literal-block">.
|__ googletest-cmake
  |__ lib
  | |__ googletest -&gt; ~/dev-tools/gtest-1.7.0
  |__ src
  | |__ lib1.cpp
  | |__ lib1.hpp
  |__ test
  | |__ lib1_test.cpp
  |__ CMakeLists.txt
  |__ Makefile</pre>
<section id="create-directory-hierarchy"><h4>Create directory hierarchy</h4>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="#rest_code_776e0460eb2c45c18b766fe814875664-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><a id="rest_code_776e0460eb2c45c18b766fe814875664-1" name="rest_code_776e0460eb2c45c18b766fe814875664-1"></a>$ mkdir googletest-cmake
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_776e0460eb2c45c18b766fe814875664-2"><code data-line-number="2"></code></a></td>
<td class="code"><code><a id="rest_code_776e0460eb2c45c18b766fe814875664-2" name="rest_code_776e0460eb2c45c18b766fe814875664-2"></a>$ <span class="nb">cd</span> googletest-cmake
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_776e0460eb2c45c18b766fe814875664-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><a id="rest_code_776e0460eb2c45c18b766fe814875664-3" name="rest_code_776e0460eb2c45c18b766fe814875664-3"></a>$ mkdir lib src <span class="nb">test</span>
</code></td>
</tr>
</table></div></section><section id="create-a-symbolic-link-to-google-testing-framework-directory"><h4>Create a symbolic link to google testing framework directory</h4>
<p>I have google test located in my home dir dev-tools/gtest-1.7.0, so:</p>
<div class="code"><pre class="code bash"><a id="rest_code_e2affab911004c8da139ed9d8a5d5e30-1" name="rest_code_e2affab911004c8da139ed9d8a5d5e30-1" href="#rest_code_e2affab911004c8da139ed9d8a5d5e30-1"></a>$ ln -s ~/dev-tools/gtest-1.7.0 lib/googletest
</pre></div>
</section><section id="write-sample-functions-that-will-be-tested"><h4>Write sample functions that will be tested</h4>
<p>cpp-googletest-cmake/src/lib1.hpp:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="#rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><a id="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-1" name="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-1"></a><span class="cp">#ifndef _LIB1_H</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-2"><code data-line-number="2"></code></a></td>
<td class="code"><code><a id="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-2" name="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-2"></a><span class="cp">#define _LIB1_H 1</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><a id="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-3" name="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-3"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><a id="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-4" name="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n2</span><span class="p">);</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-5"><code data-line-number="5"></code></a></td>
<td class="code"><code><a id="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-5" name="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-5"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-6"><code data-line-number="6"></code></a></td>
<td class="code"><code><a id="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-6" name="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-6"></a><span class="kt">int</span><span class="w"> </span><span class="nf">mul</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n2</span><span class="p">);</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-7"><code data-line-number="7"></code></a></td>
<td class="code"><code><a id="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-7" name="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-7"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-8"><code data-line-number="8"></code></a></td>
<td class="code"><code><a id="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-8" name="rest_code_6cc69d5a12ec4f85b1ec8c76ff97f568-8"></a><span class="cp">#endif</span>
</code></td>
</tr>
</table></div>
<p>cpp-googletest-cmake/src/lib1.cpp:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-1" name="rest_code_510c937218564d2a952bed4f5827b41b-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">"lib1.hpp"</span><span class="cp"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-2" name="rest_code_510c937218564d2a952bed4f5827b41b-2"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-3" name="rest_code_510c937218564d2a952bed4f5827b41b-3"></a><span class="kt">int</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-4" name="rest_code_510c937218564d2a952bed4f5827b41b-4"></a><span class="nf">sum</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n2</span><span class="p">)</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-5" name="rest_code_510c937218564d2a952bed4f5827b41b-5"></a><span class="p">{</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-6" name="rest_code_510c937218564d2a952bed4f5827b41b-6"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">n1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">n2</span><span class="p">;</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-7" name="rest_code_510c937218564d2a952bed4f5827b41b-7"></a><span class="p">}</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-8" name="rest_code_510c937218564d2a952bed4f5827b41b-8"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-9" name="rest_code_510c937218564d2a952bed4f5827b41b-9"></a><span class="kt">int</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-10"><code data-line-number="10"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-10" name="rest_code_510c937218564d2a952bed4f5827b41b-10"></a><span class="nf">mul</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n2</span><span class="p">)</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-11"><code data-line-number="11"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-11" name="rest_code_510c937218564d2a952bed4f5827b41b-11"></a><span class="p">{</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-12"><code data-line-number="12"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-12" name="rest_code_510c937218564d2a952bed4f5827b41b-12"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">n1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">n2</span><span class="p">;</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_510c937218564d2a952bed4f5827b41b-13"><code data-line-number="13"></code></a></td>
<td class="code"><code><a id="rest_code_510c937218564d2a952bed4f5827b41b-13" name="rest_code_510c937218564d2a952bed4f5827b41b-13"></a><span class="p">}</span><span class="w"></span>
</code></td>
</tr>
</table></div></section><section id="create-build-scripts"><h4>Create build scripts</h4>
<p>googletest-cmake/src/CMakeLists.txt:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-1" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-1"></a><span class="nb">cmake_minimum_required</span> <span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">2.6</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-2" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-2"></a><span class="nb">project</span> <span class="p">(</span><span class="s">Lib1</span><span class="w"> </span><span class="s">CXX</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-3" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-3"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-4" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-4"></a><span class="nb">set</span> <span class="p">(</span><span class="s">CMAKE_CXX_FLAGS</span><span class="w"> </span><span class="s2">"-ggdb"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-5" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-5"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-6" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-6"></a><span class="nb">set</span> <span class="p">(</span><span class="s">SRC_DIR</span><span class="w"> </span><span class="s2">"${CMAKE_CURRENT_SOURCE_DIR}/src"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-7" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-7"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-8" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-8"></a><span class="nb">include_directories</span> <span class="p">(</span><span class="s2">"${SRC_DIR}"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-9" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-9"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-10"><code data-line-number="10"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-10" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-10"></a><span class="nb">file</span> <span class="p">(</span><span class="s">GLOB_RECURSE</span><span class="w"> </span><span class="s">SRC_FILES</span><span class="w"> </span><span class="s2">"${SRC_DIR}/*.cpp"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-11"><code data-line-number="11"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-11" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-11"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-12"><code data-line-number="12"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-12" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-12"></a><span class="c"># Compiles static lib that will be linked with tests.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-13"><code data-line-number="13"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-13" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-13"></a><span class="nb">set</span> <span class="p">(</span><span class="s">LIB_NAME</span><span class="w"> </span><span class="s2">"lib1"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-14"><code data-line-number="14"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-14" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-14"></a><span class="nb">add_library</span> <span class="p">(</span><span class="s2">"${LIB_NAME}"</span><span class="w"> </span><span class="s">STATIC</span><span class="w"> </span><span class="o">${</span><span class="nv">SRC_FILES</span><span class="o">}</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-15"><code data-line-number="15"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-15" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-15"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-16"><code data-line-number="16"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-16" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-16"></a><span class="c"># Include googletest.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-17"><code data-line-number="17"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-17" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-17"></a><span class="nb">set</span> <span class="p">(</span><span class="s">GTEST_DIR</span><span class="w"> </span><span class="s2">"${CMAKE_CURRENT_SOURCE_DIR}/lib/googletest"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-18"><code data-line-number="18"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-18" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-18"></a><span class="nb">add_subdirectory</span> <span class="p">(</span><span class="o">${</span><span class="nv">GTEST_DIR</span><span class="o">}</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-19"><code data-line-number="19"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-19" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-19"></a><span class="nb">include_directories</span> <span class="p">(</span><span class="s2">"${GTEST_DIR}/include"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-20"><code data-line-number="20"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-20" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-20"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-21"><code data-line-number="21"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-21" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-21"></a><span class="c"># Build tests executable.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-22"><code data-line-number="22"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-22" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-22"></a><span class="nb">set</span> <span class="p">(</span><span class="s">TEST_EXEC</span><span class="w"> </span><span class="s2">"${LIB_NAME}_test"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-23"><code data-line-number="23"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-23" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-23"></a><span class="nb">set</span> <span class="p">(</span><span class="s">TEST_SRC_DIR</span><span class="w"> </span><span class="s2">"${CMAKE_CURRENT_SOURCE_DIR}/test"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-24"><code data-line-number="24"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-24" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-24"></a><span class="nb">file</span> <span class="p">(</span><span class="s">GLOB_RECURSE</span><span class="w"> </span><span class="s">TEST_SRC_FILES</span><span class="w"> </span><span class="s2">"${TEST_SRC_DIR}/*.cpp"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-25"><code data-line-number="25"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-25" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-25"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-26"><code data-line-number="26"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-26" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-26"></a><span class="nb">add_executable</span> <span class="p">(</span><span class="s2">"${TEST_EXEC}"</span><span class="w"> </span><span class="o">${</span><span class="nv">TEST_SRC_FILES</span><span class="o">}</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-27"><code data-line-number="27"></code></a></td>
<td class="code"><code><a id="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-27" name="rest_code_8482a20e6a78422da6d6a1fa5f0f7aea-27"></a><span class="nb">target_link_libraries</span> <span class="p">(</span><span class="s2">"${TEST_EXEC}"</span><span class="w"> </span><span class="s2">"${LIB_NAME}"</span><span class="w"> </span><span class="s2">"gtest"</span><span class="w"> </span><span class="s2">"gtest_main"</span><span class="p">)</span>
</code></td>
</tr>
</table></div>
<p>CMake does the main build process, but we also use a helper Makefile that
runs cmake and the compiled tests executable.</p>
<p>googletes-cmake/src/Makefile:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-1" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-1"></a><span class="nv">BUILD_DIR</span> <span class="o">=</span> build
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-2" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-2"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-3" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-3"></a><span class="nf">all</span><span class="o">:</span> <span class="n">test</span> <span class="n">test</span>-<span class="n">run</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-4" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-4"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-5" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-5"></a><span class="nf">test</span><span class="o">:</span> <span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-6" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-6"></a>        <span class="nb">cd</span> <span class="k">$(</span>BUILD_DIR<span class="k">)</span><span class="p">;</span> cmake <span class="k">$(</span>CURDIR<span class="k">)</span><span class="p">;</span> make
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-7" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-7"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-8" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-8"></a><span class="nf">test-run</span><span class="o">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-9" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-9"></a>        <span class="k">$(</span>BUILD_DIR<span class="k">)</span>/lib1_test
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-10"><code data-line-number="10"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-10" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-10"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-11"><code data-line-number="11"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-11" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-11"></a><span class="nf">$(BUILD_DIR)</span><span class="o">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-12"><code data-line-number="12"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-12" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-12"></a>        mkdir -p <span class="nv">$@</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-13"><code data-line-number="13"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-13" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-13"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-14"><code data-line-number="14"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-14" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-14"></a><span class="nf">clean</span><span class="o">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-15"><code data-line-number="15"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-15" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-15"></a>        rm -rf <span class="k">$(</span>BUILD_DIR<span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-16"><code data-line-number="16"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-16" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-16"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_9c4b5a1f71e34af68cfd043d9707ce97-17"><code data-line-number="17"></code></a></td>
<td class="code"><code><a id="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-17" name="rest_code_9c4b5a1f71e34af68cfd043d9707ce97-17"></a><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">test</span> <span class="n">test</span>-<span class="n">run</span> <span class="n">clean</span>
</code></td>
</tr>
</table></div></section><section id="create-test-suite"><h4>Create test suite</h4>
<p>googletes-cmake/test/lib1_test.cpp:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-1" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span><span class="cp"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-2" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-2"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-3" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">"lib1.hpp"</span><span class="cp"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-4" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-4"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-5" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-5"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-6" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-6"></a><span class="n">TEST</span><span class="p">(</span><span class="n">lib1</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="p">)</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-7" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-7"></a><span class="p">{</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-8" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-8"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">);</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-9" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-9"></a><span class="w">        </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">25</span><span class="p">);</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-10"><code data-line-number="10"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-10" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-10"></a><span class="p">}</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-11"><code data-line-number="11"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-11" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-11"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-12"><code data-line-number="12"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-12" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-12"></a><span class="n">TEST</span><span class="p">(</span><span class="n">lib1</span><span class="p">,</span><span class="w"> </span><span class="n">mul</span><span class="p">)</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-13"><code data-line-number="13"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-13" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-13"></a><span class="p">{</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-14"><code data-line-number="14"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-14" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-14"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mul</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">);</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-15"><code data-line-number="15"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-15" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-15"></a><span class="w">        </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">m</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">150</span><span class="p">);</span><span class="w"></span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#rest_code_d3c618ad02294673b1978eb07dd2e2cf-16"><code data-line-number="16"></code></a></td>
<td class="code"><code><a id="rest_code_d3c618ad02294673b1978eb07dd2e2cf-16" name="rest_code_d3c618ad02294673b1978eb07dd2e2cf-16"></a><span class="p">}</span><span class="w"></span>
</code></td>
</tr>
</table></div>
<p>This is the simplest form of the unit tests. It uses ASSERT_TRUE macro which
checks if the specified expression is true. If it is not the test execution is
terminated.</p>
<p>There are more convenience macros that you can use to assert expected values:
<a class="reference external" href="https://code.google.com/p/googletest/wiki/V1_7_Primer">https://code.google.com/p/googletest/wiki/V1_7_Primer</a>.</p>
</section></section><section id="run-tests"><h3>Run tests</h3>
<p>Simply type <em>make</em> in project directory. It invokes the helper Makefile that
runs CMake which builds the tests executable and then Makefile runs this
executable.</p>
<section id="successfull-execution-results"><h4>Successfull execution results</h4>
<img alt="/images/gtest_ok.png" src="../../images/gtest_ok.png"></section><section id="example-of-tests-failure"><h4>Example of tests failure</h4>
<img alt="/images/gtest_fail.png" src="../../images/gtest_fail.png"></section></section></section>
</div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/cpp/" rel="tag">cpp</a></li>
            <li><a class="tag p-category" href="../../categories/testing/" rel="tag">testing</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../sphinx-getting-started/" rel="prev" title="Getting started with Sphinx">Previous post</a>
            </li>
            <li class="next">
                <a href="../cpp-static-analysis/" rel="next" title="Static C++ code analysis">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
            

        </section></article><!--End of body content--><footer id="footer">
            Contents © 2022         <a href="mailto:balciunas90@gmail.com">Povilas Balciunas</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>

        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
